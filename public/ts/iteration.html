<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
  <script>
    /*循环是迭代机制的基础，
    迭代是在有序集合上及逆行，
    比如数组
    params[Symbol.iterator]()   生成一个迭代器
    params[Symbol.iterator] 可以检验有没有实现迭代器工厂函数，实际开发中不需要显示的调用，
    迭代器是一种一次性使用的对象。
    一个next就是一个迭代，返回一个迭代器
    迭代器维护着一个指向可迭代对象的引用，因此迭代器会（阻止垃圾回收程序回收可迭代对象），意思就是没办法进行回收  
    */
    let num = 1;
    let str = "asd";
    let obj = { a: "obj" };
    let arr = ["a", "b", "v"];
    console.log(num[Symbol.iterator], "arr", num);
    console.log(str[Symbol.iterator](), "str", str);
    console.log(obj[Symbol.iterator], "obj", obj);
    console.log(arr[Symbol.iterator](), "arr", arr);
    let ite = arr[Symbol.iterator]();
    console.log(ite, "ite");
    console.log(ite.next(), "next=1");
    console.log(ite.next(), "next=2");
    console.log(ite.next(), "next=3");
    console.log(ite.next(), "next=4");

    /*生成器
   1、是一个函数，函数名称前面加*,表示一个生成器，
   2、箭头函数不能用来定义生成器
   3、调用生成器函数会产生一个生成器对象， 
    */
    function* generatorFn() {}
    let ge = function*() {};
    let obj1 = {
      *generatorFn() {},
    };
    let generatorObj = generatorFn();
    console.log(generatorObj, "generatorObj"); //迭代器的获得
    console.log(generatorObj.next()); //{value:,done value是生成器函数的返回值,默认值是undefined}
    console.log(generatorFn()[Symbol.iterator], "===");
    /*
    yeild 生成器函数遇到yield关键字之后，执行就会停止，函数作用域的状态会被保留，
    停止执行的生成器函数只能通过在生成器对象上调用next放大来恢复
    yeild 只能在生成器函数内部使用,用在其他地方会抛出错误
    */

    function* generatorFn2() {
      yield "foo";
      yield "bar";
      return "baz";
    }
    let generatorObj2 = generatorFn2();
    console.log(generatorObj2);
    console.log(generatorObj2.next());
    console.log(generatorObj2.next());
    console.log(generatorObj2.next());

    /*
   生成器对象作为可迭代对象
    */
    function* ge3() {
      yield 1;
      yield 2;
      yield 3;
    }
    for (const item of ge3()) {
      console.log(item, "item==");
    }

    
  </script>
</html>
